/*!
 * 
 *   js-tracker v0.0.1
 *   https://github.com/csc478group9/js-tracker
 *
 *   Copyright (c) Charles Young
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.JSTracker=n():e.JSTracker=n()}(self,(function(){return(()=>{var e={327:(e,n,o)=>{var r=o(525)("cookie");function t(e,n,o){o=o||{};var r=i(e)+"="+i(n);null==n&&(o.maxage=-1),o.maxage&&(o.expires=new Date(+new Date+o.maxage)),o.path&&(r+="; path="+o.path),o.domain&&(r+="; domain="+o.domain),o.expires&&(r+="; expires="+o.expires.toUTCString()),o.secure&&(r+="; secure"),document.cookie=r}function s(){var e;try{e=document.cookie}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}return function(e){var n,o={},r=e.split(/ *; */);if(""==r[0])return o;for(var t=0;t<r.length;++t)o[c((n=r[t].split("="))[0])]=c(n[1]);return o}(e)}function a(e){return s()[e]}function i(e){try{return encodeURIComponent(e)}catch(n){r("error `encode(%o)` - %o",e,n)}}function c(e){try{return decodeURIComponent(e)}catch(n){r("error `decode(%o)` - %o",e,n)}}e.exports=function(e,n,o){switch(arguments.length){case 3:case 2:return t(e,n,o);case 1:return a(e);default:return s()}}},525:(e,n,o)=>{function r(){var e;try{e=n.storage.debug}catch(e){}return e}(n=e.exports=o(694)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var e=arguments,o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+n.humanize(this.diff),!o)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var t=0,s=0;return e[0].replace(/%[a-z%]/g,(function(e){"%%"!==e&&(t++,"%c"===e&&(s=t))})),e.splice(s,0,r),e},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=r,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(r())},694:(e,n,o)=>{(n=e.exports=function(e){function o(){}function t(){var e=t,o=+new Date,a=o-(r||o);e.diff=a,e.prev=r,e.curr=o,r=o,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=s());var i=Array.prototype.slice.call(arguments);i[0]=n.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var c=0;i[0]=i[0].replace(/%([a-z%])/g,(function(o,r){if("%%"===o)return o;c++;var t=n.formatters[r];if("function"==typeof t){var s=i[c];o=t.call(e,s),i.splice(c,1),c--}return o})),"function"==typeof n.formatArgs&&(i=n.formatArgs.apply(e,i));var u=t.log||n.log||console.log.bind(console);u.apply(e,i)}o.enabled=!1,t.enabled=!0;var a=n.enabled(e)?t:o;return a.namespace=e,a}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e);for(var o=(e||"").split(/[\s,]+/),r=o.length,t=0;t<r;t++)o[t]&&("-"===(e=o[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var o,r;for(o=0,r=n.skips.length;o<r;o++)if(n.skips[o].test(e))return!1;for(o=0,r=n.names.length;o<r;o++)if(n.names[o].test(e))return!0;return!1},n.humanize=o(837),n.names=[],n.skips=[],n.formatters={};var r,t=0;function s(){return n.colors[t++%n.colors.length]}},837:e=>{var n=1e3,o=60*n,r=60*o,t=24*r,s=365.25*t;function a(e,n,o){if(!(e<n))return e<1.5*n?Math.floor(e/n)+" "+o:Math.ceil(e/n)+" "+o+"s"}e.exports=function(e,i){return i=i||{},"string"==typeof e?function(e){if((e=""+e).length>1e4)return;var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!a)return;var i=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*s;case"days":case"day":case"d":return i*t;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*o;case"seconds":case"second":case"secs":case"sec":case"s":return i*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i}}(e):i.long?a(c=e,t,"day")||a(c,r,"hour")||a(c,o,"minute")||a(c,n,"second")||c+" ms":function(e){return e>=t?Math.round(e/t)+"d":e>=r?Math.round(e/r)+"h":e>=o?Math.round(e/o)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}(e);var c}}},n={};function o(r){if(n[r])return n[r].exports;var t=n[r]={exports:{}};return e[r](t,t.exports,o),t.exports}o.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return o.d(n,{a:n}),n},o.d=(e,n)=>{for(var r in n)o.o(n,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";o.r(r),o.d(r,{default:()=>g});var e,n=o(327),t=o.n(n),s=new Uint8Array(16);function a(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(s)}const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const c=function(e){return"string"==typeof e&&i.test(e)};for(var u=[],d=0;d<256;++d)u.push((d+256).toString(16).substr(1));const l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]).toLowerCase();if(!c(o))throw TypeError("Stringified UUID is invalid");return o};const f=function(e,n,o){var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){o=o||0;for(var t=0;t<16;++t)n[o+t]=r[t];return n}return l(r)};function p(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const g=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),t()("tracking_web_uid")||t()("tracking_web_uid",f());var o=this;return o.apiKey="string"==typeof n.apiKey?n.apiKey:"",o.anonymousID={},o.endpoint="string"==typeof n.endpoint?n.endpoint:"api",o.async="boolean"!=typeof n.async||n.async,o.debug="boolean"!=typeof n.debug||n.debug,o.records=[],o.session={},o.loadTime=new Date,this.startSession(),this.bindEvents(),o}var n,o,r;return n=e,(o=[{key:"bindEvents",value:function(){var e=this;return window.addEventListener("error",(function(n){e.addErrorEvent(n)})),window.onbeforeunload=function(){e.endSession(),e.sendEvent(e.session)},e}},{key:"addErrorEvent",value:function(e){var n=this,o={type:"error",message:e.message,source:e.source,lineno:e.lineno,colno:e.colno,errorObj:e.error,createdAt:new Date};return n.records.push(o),n.debug&&(n.endSession(),console.log("Session:\n",n.session)),n}},{key:"startSession",value:function(){var e=this;return e.session={type:"session",anonymousID:t()("tracking_web_uid"),loadTime:e.loadTime,unloadTime:new Date,language:window.navigator.language,platform:window.navigator.platform,port:window.location.port,referer:document.referrer,clientStart:{name:window.navigator.appVersion,innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight},page:{location:window.location.pathname,href:window.location.href,origin:window.location.origin,title:document.title},endpoint:e.endpoint},this.sendEvent(JSON.stringify(e.session)),e}},{key:"endSession",value:function(){var e=this;return e.session.unloadTime=new Date,e.session.interactions=e.records,e.session.clientEnd={name:window.navigator.appVersion,innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight},e}},{key:"sendEvent",value:function(e){var n=this,o=new XMLHttpRequest;return o.open("POST",n.endpoint,n.async),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.send(JSON.stringify(e)),n}}])&&p(n.prototype,o),r&&p(n,r),e}()})(),r})()}));
//# sourceMappingURL=index.js.map